window.CodeMirror=function(){function n(a,b){if(!(this instanceof n))return new n(a,b);this.options=b=b||{};for(var c in ub)!b.hasOwnProperty(c)&&ub.hasOwnProperty(c)&&(b[c]=ub[c]);vb(b);c={};var d=c.input=r("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");c.inputDiv=r("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");
c.scrollbarH=r("div",[r("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=r("div",[r("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=r("div",null,"CodeMirror-scrollbar-filler");c.lineDiv=r("div");c.selectionDiv=r("div",null,null,"position: relative; z-index: 1");c.cursor=r("pre","\u00a0","CodeMirror-cursor");c.otherCursor=r("pre","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=r("div",null,"CodeMirror-measure");c.lineSpace=r("div",[c.measure,
c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=r("div",[r("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative");c.sizer=r("div",[c.mover],"CodeMirror-sizer");c.heightForcer=r("div","\u00a0",null,"position: absolute; height: "+sa+"px");c.gutters=r("div",null,"CodeMirror-gutters");c.lineGutter=null;var e=r("div",[c.sizer,c.heightForcer,c.gutters],null,"position: relative; min-height: 100%");c.scroller=r("div",[e],"CodeMirror-scroll");
c.scroller.setAttribute("tabIndex","-1");c.wrapper=r("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.scroller],"CodeMirror");ga&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0);a.appendChild?a.appendChild(c.wrapper):a(c.wrapper);Na&&(d.style.width="0px");U||(c.scroller.draggable=!0);wb?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):ga&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px");c.viewOffset=c.showingFrom=c.showingTo=c.lastSizeC=
0;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=!1;c.pollingFast=!1;c.poll=new xb;c.draggingText=!1;c.cachedCharWidth=c.cachedTextHeight=null;c.measureLineCache=[];c.measureLineCachePos=0;c.inaccurateSelection=!1;c.pasteIncoming=!1;c=this.display=c;c.wrapper.CodeMirror=this;Zb(this);b.autofocus&&!$b&&H(this);d=new Oa([new Pa([ta("",null,ba(c))])]);e={line:0,ch:0};this.view={doc:d,frontier:0,highlight:new xb,sel:{from:e,to:e,head:e,anchor:e,shift:!1,extend:!1},
scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:v(d,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[]};this.nextOpId=0;Qa(this);ac(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");this.setValue(b.value||"");V&&setTimeout(M(ha,this,!0),20);this.view.history=yb();var f=this,d=function(){f.view.focused&&setTimeout(M(H,f),0)},e=function(a){(!f.options.onDragEvent||!f.options.onDragEvent(f,ua(a)))&&Ra(a)},g=function(){h.inaccurateSelection&&
(h.prevInput="",h.inaccurateSelection=!1,h.input.value=f.getSelection(),bc(h.input))},h=f.display;s(h.scroller,"mousedown",t(f,cd));s(h.scroller,"dblclick",t(f,D));s(h.lineSpace,"selectstart",function(a){cc(h,a)||D(a)});W||s(h.scroller,"contextmenu",function(a){dc(f,a)});s(h.scroller,"scroll",function(){va(f,h.scroller.scrollTop);wa(f,h.scroller.scrollLeft,!0);ia(f,"scroll",f)});s(h.scrollbarV,"scroll",function(){va(f,h.scrollbarV.scrollTop)});s(h.scrollbarH,"scroll",function(){wa(f,h.scrollbarH.scrollLeft)});
s(h.scroller,"mousewheel",function(a){ec(f,a)});s(h.scroller,"DOMMouseScroll",function(a){ec(f,a)});s(h.scrollbarH,"mousedown",d);s(h.scrollbarV,"mousedown",d);s(h.wrapper,"scroll",function(){h.wrapper.scrollTop=h.wrapper.scrollLeft=0});s(window,"resize",function k(){h.cachedCharWidth=h.cachedTextHeight=null;xa(f);h.wrapper.parentNode?O(f,!0):P(window,"resize",k)});s(h.input,"keyup",t(f,function(a){if((!f.options.onKeyEvent||!f.options.onKeyEvent(f,ua(a)))&&16==F(a,"keyCode"))f.view.sel.shift=!1}));
s(h.input,"input",M(ya,f));s(h.input,"keydown",t(f,fc));s(h.input,"keypress",t(f,dd));s(h.input,"focus",M(ca,f));s(h.input,"blur",M(zb,f));f.options.dragDrop&&(s(h.scroller,"dragstart",function(a){var b=f.getSelection();a.dataTransfer.setData("Text",b);a.dataTransfer.setDragImage&&!Ab&&a.dataTransfer.setDragImage(r("img"),0,0)}),s(h.scroller,"dragenter",e),s(h.scroller,"dragover",e),s(h.scroller,"drop",t(f,ed)));s(h.scroller,"paste",function(){H(f);ya(f)});s(h.input,"paste",function(){h.pasteIncoming=
!0;ya(f)});s(h.input,"cut",g);s(h.input,"copy",g);wb&&s(h.sizer,"mouseup",function(){document.activeElement==h.input&&h.input.blur();H(f)});var j;try{j=document.activeElement==c.input}catch(m){}j||b.autofocus&&!$b?setTimeout(M(ca,this),20):zb(this);t(this,function(){for(var a in ja)if(ja.propertyIsEnumerable(a))ja[a](this,b[a],gc);for(a=0;a<Bb.length;++a)Bb[a](this)})()}function Qa(a){var b=a.view.doc;a.view.mode=n.getMode(a.options,a.options.mode);b.iter(0,b.size,function(a){a.stateAfter=null});
a.view.frontier=0;Sa(a,100)}function ac(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");xa(a)}function za(a){Zb(a);O(a,!0)}function Zb(a){var b=a.display.gutters,c=a.options.gutters;Ta(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(r("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function Ua(a,
b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=Aa(e);)d=d.find(),e=v(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=Va(e);)d=d.find(),c-=e.text.length-d.from.ch,e=v(a,d.to.line),c+=e.text.length-d.to.ch;return c}function hc(a){a.maxLine=v(a.doc,0);a.maxLineLength=Ua(a.doc,a.maxLine);a.maxLineChanged=!0;a.doc.iter(1,a.doc.size,function(b){var c=Ua(a.doc,b);c>a.maxLineLength&&(a.maxLineLength=c,a.maxLine=b)})}function vb(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==
a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function ic(a,b){var c=b+2*a.lineSpace.offsetTop;a.sizer.style.minHeight=a.heightForcer.style.top=c+"px";var c=Math.max(c,a.scroller.scrollHeight),d=a.scroller.scrollWidth>a.scroller.clientWidth,e=c>a.scroller.clientHeight;e?(a.scrollbarV.style.display="block",a.scrollbarV.style.bottom=d?Wa(a.measure)+"px":"0",a.scrollbarV.firstChild.style.height=c-a.scroller.clientHeight+a.scrollbarV.clientHeight+
"px"):a.scrollbarV.style.display="";d?(a.scrollbarH.style.display="block",a.scrollbarH.style.right=e?Wa(a.measure)+"px":"0",a.scrollbarH.firstChild.style.width=a.scroller.scrollWidth-a.scroller.clientWidth+a.scrollbarH.clientWidth+"px"):a.scrollbarH.style.display="";d&&e?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=a.scrollbarFiller.style.width=Wa(a.measure)+"px"):a.scrollbarFiller.style.display="";fd&&0===Wa(a.measure)&&(a.scrollbarV.style.minWidth=a.scrollbarH.style.minHeight=
gd?"18px":"12px")}function jc(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:Xa(b,d),to:Xa(b,a)}}function O(a,b,c){var d,e,f,g=a.display.showingFrom,h=a.display.showingTo;a:{var j=b;b=a.display;var m=a.view.doc;if(b.wrapper.clientWidth){var l=jc(b,m,c);if(!(!0!==j&&0==j.length&&l.from>b.showingFrom&&l.to<b.showingTo)){if(c=j)if(a.options.lineNumbers){c=String(a.options.lineNumberFormatter(a.view.doc.size-
1+a.options.firstLineNumber));var k=a.display;if(c.length!=k.lineNumChars){var q=k.measure.appendChild(r("div",[r("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),p=q.firstChild.offsetWidth,q=q.offsetWidth-p;k.lineGutter.style.width="";k.lineNumInnerWidth=Math.max(p,k.lineGutter.offsetWidth-q);k.lineNumWidth=k.lineNumInnerWidth+q;k.lineNumChars=k.lineNumInnerWidth?c.length:-1;k.lineGutter.style.width=k.lineNumWidth+"px";c=!0}else c=!1}else c=!1;c&&(j=!0);b.sizer.style.marginLeft=b.scrollbarH.style.left=
b.gutters.offsetWidth+"px";if(!0!==j&&Ba)for(p=0;p<j.length;++p)for(k=j[p];c=Aa(v(m,k.from));)c=c.find().from.line,k.diff&&(k.diff-=k.from-c),k.from=c;k=!0===j?0:Infinity;if(a.options.lineNumbers&&j&&!0!==j)for(p=0;p<j.length;++p)if(j[p].diff){k=j[p].from;break}c=Math.max(l.from-a.options.viewportMargin,0);l=Math.min(m.size,l.to+a.options.viewportMargin);b.showingFrom<c&&20>c-b.showingFrom&&(c=b.showingFrom);b.showingTo>l&&20>b.showingTo-l&&(l=Math.min(m.size,b.showingTo));if(Ba)for(c=J(Ya(m,v(m,
c)));l<m.size&&X(v(m,l));)++l;if(!0===j)j=[];else{for(var p=[{from:b.showingFrom,to:b.showingTo}],q=0,E=j.length||0;q<E;++q){for(var Q=j[q],x=[],u=Q.diff||0,n=0,t=p.length;n<t;++n){var N=p[n];Q.to<=N.from&&Q.diff?x.push({from:N.from+u,to:N.to+u}):Q.to<=N.from||Q.from>=N.to?x.push(N):(Q.from>N.from&&x.push({from:N.from,to:Q.from}),Q.to<N.to&&x.push({from:Q.to+u,to:N.to+u}))}p=x}j=p}for(var s=j,p=j=0;p<s.length;++p)q=s[p],q.from<c&&(q.from=c),q.to>l&&(q.to=l),q.from>=q.to?s.splice(p--,1):j+=q.to-q.from;
if(!(j==l-c&&c==b.showingFrom&&l==b.showingTo)){s.sort(function(a,b){return a.from-b.from});j<0.7*(l-c)&&(b.lineDiv.style.display="none");for(var j=c,p=l,hd=k,y=function(b){var c=b.nextSibling;U&&ka&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):D.removeChild(b);return c},k=a.display,w={},C={},q=k.gutters.firstChild,E=0;q;q=q.nextSibling,++E)w[a.options.gutters[E]]=q.offsetLeft,C[a.options.gutters[E]]=q.offsetWidth;d=k.scroller.getBoundingClientRect().left-k.sizer.getBoundingClientRect().left;
e=k.gutters.offsetWidth;f=k.wrapper.clientWidth;var k=a.display,B=a.options.lineNumbers;!s.length&&(!V&&(!U||!a.display.currentWheelTarget))&&Ta(k.lineDiv);var D=k.lineDiv,z=D.firstChild,la=s.shift(),A=j;for(a.view.doc.iter(j,p,function(b){la&&la.to==A&&(la=s.shift());if(X(b))0!=b.height&&Y(b,0);else if(la&&la.from<=A&&la.to>A){for(;z.lineObj!=b;)z=y(z);B&&(hd<=A&&z.lineNumber)&&kc(z.lineNumber,String(a.options.lineNumberFormatter(A+a.options.firstLineNumber)));z=z.nextSibling}else{var c;var g=A;
c=lc(a,b);var h=b.gutterMarkers,j=a.display;if(a.options.lineNumbers||h||b.bgClass||b.wrapClass||b.widgets&&b.widgets.length){var k=r("div",null,b.wrapClass,"position: relative");if(a.options.lineNumbers||h){var l=k.appendChild(r("div",null,null,"position: absolute; left: "+d+"px"));k.alignable=[l];if(a.options.lineNumbers&&(!h||!h["CodeMirror-linenumbers"]))k.lineNumber=l.appendChild(r("div",String(a.options.lineNumberFormatter(g+a.options.firstLineNumber)),"CodeMirror-linenumber CodeMirror-gutter-elt",
"left: "+w["CodeMirror-linenumbers"]+"px; width: "+j.lineNumInnerWidth+"px"));if(h)for(g=0;g<a.options.gutters.length;++g){var j=a.options.gutters[g],m=h.hasOwnProperty(j)&&h[j];m&&l.appendChild(r("div",[m],"CodeMirror-gutter-elt","left: "+w[j]+"px; width: "+C[j]+"px"))}}b.bgClass&&k.appendChild(r("div","\u00a0",b.bgClass+" CodeMirror-linebackground"));k.appendChild(c);if(b.widgets){h=0;for(g=b.widgets;h<g.length;++h){j=g[h];m=r("div",[j.node],"CodeMirror-linewidget");m.widget=j;if(j.noHScroll){(k.alignable||
(k.alignable=[])).push(m);var q=f;m.style.left=d+"px";j.coverGutter||(q-=e,m.style.paddingLeft=e+"px");m.style.width=q+"px"}j.coverGutter&&(m.style.zIndex=5,m.style.position="relative",j.noHScroll||(m.style.marginLeft=-e+"px"));j.above?k.insertBefore(m,a.options.lineNumbers&&0!=b.height?l:c):k.appendChild(m)}}ga&&(k.style.zIndex=2);c=k}D.insertBefore(c,z);c.lineObj=b}++A});z;)z=y(z);b.lineDiv.style.display="";if(c!=b.showingFrom||l!=b.showingTo||b.lastSizeC!=b.wrapper.clientHeight)b.lastSizeC=b.wrapper.clientHeight;
b.showingFrom=c;b.showingTo=l;Sa(a,100);l=b.lineDiv.offsetTop;for(k=b.lineDiv.firstChild;k;k=k.nextSibling)k.lineObj&&(ga?(p=k.offsetTop+k.offsetHeight,j=p-l,l=p):(j=k.getBoundingClientRect(),j=j.bottom-j.top),p=k.lineObj.height-j,2>j&&(j=ba(b)),(0.001<p||-0.001>p)&&Y(k.lineObj,j));b.viewOffset=Ca(a,v(m,c));b.mover.style.top=b.viewOffset+"px";b=!0;break a}}}else b.showingFrom=b.showingTo=b.viewOffset=0;b=void 0}b&&(ma(a,a,"update",a),(a.display.showingFrom!=g||a.display.showingTo!=h)&&ma(a,a,"viewportChange",
a,a.display.showingFrom,a.display.showingTo));Cb(a);ic(a.display,a.view.doc.height);return b}function Cb(a){var b=a.display,c=C(a.view.sel.from,a.view.sel.to);if(c||a.options.showCursorWhenSelecting){var d=a.display,e=Z(a,a.view.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";e.other?(d.otherCursor.style.display="",d.otherCursor.style.left=e.other.left+"px",d.otherCursor.style.top=
e.other.top+"px",d.otherCursor.style.height=0.85*(e.other.bottom-e.other.top)+"px"):d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";if(c)b.selectionDiv.style.display="none";else{var f=function(a,b,c,d){0>b&&(b=0);h.appendChild(r("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?j-a:c)+"px; height: "+(d-b)+"px"))},d=function(b,c,d,e){var h=v(g,b),k=h.text.length,l=e?Infinity:-Infinity;var q=R(h),p=
c||0,r=null==d?k:d,n=function(g,q,p){var r=Za(a,{line:b,ch:"rtl"==p?q-1:g},"div",h);p=Za(a,{line:b,ch:"rtl"==p?g:q-1},"div",h);var n=r.left,s=p.right;3<p.top-r.top&&(f(n,r.top,null,r.bottom),n=m,r.bottom<p.top&&f(n,r.bottom,null,p.top));null==d&&q==k&&(s=j);null==c&&0==g&&(n=m);l=e?Math.min(p.top,l):Math.max(p.bottom,l);n<m+1&&(n=m);f(n,p.top,s-n,p.bottom)};if(q)for(var t=0;t<q.length;++t){var s=q[t];s.from<r&&s.to>p&&n(Math.max(s.from,p),Math.min(s.to,r),1==s.level?"rtl":"ltr")}else n(p,r,"ltr");
return l},c=a.display,g=a.view.doc,e=a.view.sel,h=document.createDocumentFragment(),j=c.lineSpace.offsetWidth,m=mc(a.display);if(e.from.line==e.to.line)d(e.from.line,e.from.ch,e.to.ch);else{for(var l=v(g,e.from.line),k=l,q=[e.from.line,e.from.ch],p;k=Va(k);){k=k.find();q.push(k.from.ch,k.to.line,k.to.ch);if(k.to.line==e.to.line){q.push(e.to.ch);p=!0;break}k=v(g,k.to.line)}if(p)for(p=0;p<q.length;p+=3)d(q[p],q[p+1],q[p+2]);else q=v(g,e.to.line),p=e.from.ch?d(e.from.line,e.from.ch,null,!1):Ca(a,l)-
c.viewOffset,d=e.to.ch?d(e.to.line,Aa(q)?null:0,e.to.ch,!0):Ca(a,q)-c.viewOffset,p<d&&f(m,p,null,d)}da(c.selectionDiv,h);c.selectionDiv.style.display=""}c=Z(a,a.view.sel.head,"div");d=b.wrapper.getBoundingClientRect();p=b.lineDiv.getBoundingClientRect();b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,c.top+p.top-d.top))+"px";b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,c.left+p.left-d.left))+"px"}function $a(a){var b=a.display;clearInterval(b.blinker);var c=
!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";b.blinker=setInterval(function(){b.cursor.offsetHeight&&(b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden")},a.options.cursorBlinkRate)}function Sa(a,b){a.view.frontier<a.display.showingTo&&a.view.highlight.set(b,M(id,a))}function id(a){var b=a.view,c=b.doc;if(!(b.frontier>=a.display.showingTo)){var d=+new Date+a.options.workTime,e=na(b.mode,Da(a,b.frontier)),f=[],g;c.iter(b.frontier,Math.min(c.size,a.display.showingTo+
500),function(c){b.frontier>=a.display.showingFrom?(nc(a,c,e)&&b.frontier>=a.display.showingFrom&&(g&&g.end==b.frontier?g.end++:f.push(g={start:b.frontier,end:b.frontier+1})),c.stateAfter=na(b.mode,e)):(oc(a,c,e),c.stateAfter=0==b.frontier%5?na(b.mode,e):null);++b.frontier;if(+new Date>d)return Sa(a,a.options.workDelay),!0});f.length&&t(a,function(){for(var a=0;a<f.length;++a)$(this,f[a].start,f[a].end)})()}}function Da(a,b){var c=a.view,d;a:{for(var e,f,g=a.view.doc,h=b,j=b-100;h>j;--h){if(0==h){d=
0;break a}var m=v(g,h-1);if(m.stateAfter){d=h;break a}m=oa(m.text,null,a.options.tabSize);if(null==f||e>m)f=h-1,e=m}d=f}var l=d&&v(c.doc,d-1).stateAfter,l=l?na(c.mode,l):pc(c.mode);c.doc.iter(d,b,function(e){oc(a,e,l);e.stateAfter=d==b-1||0==d%5||d>=c.showingFrom&&d<c.showingTo?na(c.mode,l):null;++d});return l}function mc(a){return da(a.measure,r("pre")).appendChild(r("span","x")).offsetLeft}function Db(a,b,c,d){d=d||Eb(a,b);a=-1;for(b=c;;b+=a){var e=d[b];if(e)break;0>a&&0==b&&(a=1)}return{left:b<
c?e.right:e.left,right:b>c?e.left:e.right,top:e.top,bottom:e.bottom}}function Eb(a,b){for(var c=a.display,d=a.display.measureLineCache,e=0;e<d.length;++e){var f=d[e];if(f.text==b.text&&f.markedSpans==b.markedSpans&&c.scroller.clientWidth==f.width)return f.measure}var g=a.display,e=qc(b.text.length),h=lc(a,b,e);if(V&&!ga&&!a.options.lineWrapping&&100<h.childNodes.length){for(var j=document.createDocumentFragment(),m=h.childNodes.length,f=0,l=Math.ceil(m/10);f<l;++f){for(var k=r("div",null,null,"display: inline-block"),
q=0;10>q&&m;++q)k.appendChild(h.firstChild),--m;j.appendChild(k)}h.appendChild(j)}da(g.measure,h);m=g.lineDiv.getBoundingClientRect();j=[];g=qc(b.text.length);h=h.offsetHeight;for(f=0;f<e.length;++f)if(q=e[f]){for(var l=q.getBoundingClientRect(),k=Math.max(0,l.top-m.top),p=Math.min(l.bottom-m.top,h),q=0;q<j.length;q+=2){var E=j[q],n=j[q+1];if(!(E>p||n<k))if(E<=k&&n>=p||k<=E&&p>=n||Math.min(p,n)-Math.max(k,E)>=p-k>>1){j[q]=Math.min(k,E);j[q+1]=Math.max(p,n);break}}q==j.length&&j.push(k,p);g[f]={left:l.left-
m.left,right:l.right-m.left,top:q}}for(f=0;f<g.length;++f)if(q=g[f])e=q.top,q.top=j[e],q.bottom=j[e+1];f={text:b.text,width:c.scroller.clientWidth,markedSpans:b.markedSpans,measure:g};16==d.length?d[++c.measureLineCachePos%16]=f:d.push(f);return g}function xa(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0;a.display.cachedCharWidth=a.display.cachedTextHeight=null;a.view.maxLineChanged=!0}function rc(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=
b.widgets[e].node.offsetHeight;c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Ca(a,b);"local"!=d&&(b-=a.display.viewOffset);"page"==d&&(a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop),a=a.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=a,c.right+=a);c.top+=b;c.bottom+=b;return c}function Za(a,b,c,d){d||(d=v(a.view.doc,b.line));return rc(a,d,Db(a,d,b.ch),c)}function Z(a,
b,c,d,e){function f(b,f){var g=Db(a,d,b,e);f?g.left=g.right:g.right=g.left;return rc(a,d,g,c)}d=d||v(a.view.doc,b.line);e||(e=Eb(a,d));var g=R(d);b=b.ch;if(!g)return f(b);for(var h,j,m=g[0].level,l=0;l<g.length;++l){var k=g[l],q=k.level%2,p;if(k.from<b&&k.to>b)return f(b,q);var E=q?k.from:k.to;if((q?k.to:k.from)==b)k=l&&k.level<(p=g[l-1]).level?f(p.level%2?p.from:p.to-1,!0):f(q&&k.from!=k.to?b-1:b),q==m?h=k:j=k;else if(E==b&&(p=l<g.length-1&&g[l+1],q||!(p&&p.from==p.to)))k=p&&k.level<p.level?f(p.level%
2?p.to-1:p.from):f(q?b:b-1,!0),q==m?h=k:j=k}m&&!b&&(j=f(g[0].to-1));if(!h)return j;j&&(h.other=j);return h}function Fb(a,b,c){var d=a.view.doc;c+=a.display.viewOffset;if(0>c)return{line:0,ch:0,outside:!0};var e=Xa(d,c);if(e>=d.size)return{line:d.size-1,ch:v(d,d.size-1).text.length};for(0>b&&(b=0);;){var f=v(d,e),e=jd(a,f,e,b,c),g=Va(f);if(g&&e.ch==Ea(f))e=g.find().to.line;else return e}}function jd(a,b,c,d,e){function f(d){d=Z(a,{line:c,ch:d},"line",b,m);h=!0;if(g>d.bottom)return Math.max(0,d.left-
j);if(g<d.top)return d.left+j;h=!1;return d.left}var g=e-Ca(a,b),h=!1,j=a.display.wrapper.clientWidth,m=Eb(a,b),l=R(b),k=b.text.length;e=ab(b);var q=Ea(b),p=mc(a.display),E=f(q);if(d>E)return{line:c,ch:q,outside:h};for(;;){if(l?q==e||q==Gb(b,e,1):1>=q-e){for(e=(d=d-p<E-d)?e:q;Hb.test(b.text.charAt(e));)++e;return{line:c,ch:e,after:d,outside:h}}var n=Math.ceil(k/2),r=e+n;if(l)for(var r=e,u=0;u<n;++u)r=Gb(b,r,1);u=f(r);u>d?(q=r,E=u,h&&(E+=1E3),k-=n):(e=r,p=u,k=n)}}function ba(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;
if(null==ea){ea=r("pre");for(var b=0;49>b;++b)ea.appendChild(document.createTextNode("x")),ea.appendChild(r("br"));ea.appendChild(document.createTextNode("x"))}da(a.measure,ea);b=ea.offsetHeight/50;3<b&&(a.cachedTextHeight=b);Ta(a.measure);return b||1}function sc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=r("span","x"),c=r("pre",[b]);da(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);return b||10}function Ib(a){a.curOp?++a.curOp.depth:a.curOp={depth:1,changes:[],delayedCallbacks:[],
updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++a.nextOpId}}function Jb(a){var b=a.curOp;if(!--b.depth){a.curOp=null;var c=a.view,d=a.display;b.updateMaxLine&&hc(c);if(c.maxLineChanged&&!a.options.lineWrapping){var e=Db(a,c.maxLine,c.maxLine.text.length).right;d.sizer.style.minWidth=e+3+sa+"px";c.maxLineChanged=!1}var f,g;b.selectionChanged&&(d=Z(a,c.sel.head),f=Kb(a,d.left,d.top,d.left,d.bottom));if(b.changes.length||f&&null!=f.scrollTop)g=O(a,b.changes,
f&&f.scrollTop);!g&&b.selectionChanged&&Cb(a);if(f&&(d=a.view,g=tc(a,d.sel.head),d.focused)){d=a.display;f=d.sizer.getBoundingClientRect();e=null;if(0>g.top+f.top)e=!0;else if(g.bottom+f.top>(window.innerHeight||document.documentElement.clientHeight))e=!1;if(null!=e&&!kd){if(f="none"==d.cursor.style.display)d.cursor.style.display="",d.cursor.style.left=g.left+"px",d.cursor.style.top=g.top-d.viewOffset+"px";d.cursor.scrollIntoView(e);f&&(d.cursor.style.display="none")}}b.selectionChanged&&$a(a);c.focused&&
b.updateInput&&ha(a,b.userSelChange);b.textChanged&&ia(a,"change",a,b.textChanged);b.selectionChanged&&ia(a,"cursorActivity",a);for(c=0;c<b.delayedCallbacks.length;++c)b.delayedCallbacks[c](a)}}function t(a,b){return function(){var c=a||this;Ib(c);try{var d=b.apply(c,arguments)}finally{Jb(c)}return d}}function $(a,b,c,d){a.curOp.changes.push({from:b,to:c,diff:d})}function bb(a){a.view.pollingFast||a.display.poll.set(a.options.pollInterval,function(){Lb(a);a.view.focused&&bb(a)})}function ya(a){function b(){!Lb(a)&&
!c?(c=!0,a.display.poll.set(60,b)):(a.display.pollingFast=!1,bb(a))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function Lb(a){var b=a.display.input,c=a.display.prevInput,d=a.view,e=d.sel;if(!d.focused||ld(b)||Fa(a))return!1;var f=b.value;if(f==c&&C(e.from,e.to))return!1;Ib(a);d.sel.shift=!1;for(var g=0,h=Math.min(c.length,f.length);g<h&&c[g]==f[g];)++g;h=e.from;e=e.to;g<c.length?h={line:h.line,ch:h.ch-(c.length-g)}:d.overwrite&&(C(h,e)&&!a.display.pasteIncoming)&&(e={line:e.line,ch:Math.min(v(a.view.doc,
e.line).text.length,e.ch+(f.length-g))});c=a.curOp.updateInput;Mb(a,h,e,Ga(f.slice(g)),"end",a.display.pasteIncoming?"paste":"input",{from:h,to:e});a.curOp.updateInput=c;1E3<f.length?b.value=a.display.prevInput="":a.display.prevInput=f;Jb(a);a.display.pasteIncoming=!1;return!0}function ha(a,b){var c=a.view,d,e;C(c.sel.from,c.sel.to)?b&&(a.display.prevInput=a.display.input.value=""):(a.display.prevInput="",d=cb&&(100<c.sel.to.line-c.sel.from.line||1E3<(e=a.getSelection()).length),a.display.input.value=
d?"-":e||a.getSelection(),c.focused&&bc(a.display.input));a.display.inaccurateSelection=d}function H(a){"nocursor"!=a.options.readOnly&&(V||document.activeElement!=a.display.input)&&a.display.input.focus()}function Fa(a){return a.options.readOnly||a.view.cantEdit}function cc(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(/\bCodeMirror-(?:line)?widget\b/.test(c.className)||c.parentNode==a.sizer&&c!=a.mover)return!0}function Ha(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,
c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller))return null;var e,f,d=d.lineSpace.getBoundingClientRect();try{e=b.clientX,f=b.clientY}catch(g){return null}return Fb(a,e-d.left,f-d.top)}function cd(a){function b(a){if("single"==k)A(e,w(j,m),a);else if(n=w(j,n),r=w(j,r),"double"==k){var b=uc(v(j,a.line).text,a);B(a,n)?A(e,b.from,r):A(e,n,b.to)}else"triple"==k&&(B(a,n)?A(e,r,w(j,{line:a.line,ch:0})):A(e,n,w(j,{line:a.line+1,ch:0})))}function c(a){var d=
++u,h=Ha(e,a,!0);if(h)if(C(h,q)){var k=a.clientY<x.top?-20:a.clientY>x.bottom?20:0;k&&setTimeout(t(e,function(){u==d&&(f.scroller.scrollTop+=k,c(a))}),50)}else{g.focused||ca(e);q=h;b(h);var l=jc(f,j);(h.line>=l.to||h.line<l.from)&&setTimeout(t(e,function(){u==d&&c(a)}),150)}}function d(a){u=Infinity;var c=Ha(e,a);c&&b(c);D(a);H(e);P(document,"mousemove",y);P(document,"mouseup",z)}var e=this,f=e.display,g=e.view,h=g.sel,j=g.doc;h.shift=F(a,"shiftKey");if(cc(f,a))U||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=
!0},100));else if(!md(e,a)){var m=Ha(e,a);switch(vc(a)){case 3:W&&dc.call(e,e,a);return;case 2:m&&A(e,m);setTimeout(M(H,e),20);D(a);return}if(m){g.focused||ca(e);var l=+new Date,k="single";db&&db.time>l-400&&C(db.pos,m)?(k="triple",D(a),setTimeout(M(H,e),20),l=m.line,A(e,{line:l,ch:0},w(e.view.doc,{line:l+1,ch:0}))):eb&&eb.time>l-400&&C(eb.pos,m)?(k="double",db={time:l,pos:m},D(a),l=uc(v(j,m.line).text,m),A(e,l.from,l.to)):eb={time:l,pos:m};var q=m;if(e.options.dragDrop&&Nb&&!Fa(e)&&!C(h.from,h.to)&&
!B(m,h.from)&&!B(h.to,m)&&"single"==k){var p=t(e,function(b){U&&(f.scroller.draggable=!1);g.draggingText=!1;P(document,"mouseup",p);P(f.scroller,"drop",p);10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(D(b),A(e,m),H(e))});U&&(f.scroller.draggable=!0);g.draggingText=p;f.scroller.dragDrop&&f.scroller.dragDrop();s(document,"mouseup",p);s(f.scroller,"drop",p)}else{D(a);"single"==k&&A(e,w(j,m));var n=h.from,r=h.to,x=f.wrapper.getBoundingClientRect(),u=0,y=t(e,function(a){!V&&!vc(a)?d(a):
c(a)}),z=t(e,d);s(document,"mousemove",y);s(document,"mouseup",z)}}else(a.target||a.srcElement)==f.scroller&&D(a)}}function ed(a){var b=this;if(!b.options.onDragEvent||!b.options.onDragEvent(b,ua(a))){D(a);var c=Ha(b,a,!0),d=a.dataTransfer.files;if(c&&!Fa(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var h=new FileReader;h.onload=function(){f[d]=h.result;++g==e&&(c=w(b.view.doc,c),t(b,function(){var a=aa(b,f.join(""),c,c,"paste");S(b,c,a)})())};h.readAsText(a)};
for(var h=0;h<e;++h)a(d[h],h)}else if(b.view.draggingText&&!B(c,b.view.sel.from)&&!B(b.view.sel.to,c))b.view.draggingText(a),V&&setTimeout(M(H,b),50);else try{if(f=a.dataTransfer.getData("Text")){var h=b.view.sel.from,j=b.view.sel.to;S(b,c,c);b.view.draggingText&&aa(b,"",h,j,"paste");b.replaceSelection(f,null,"paste");H(b);ca(b)}}catch(m){}}}function md(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(f){return!1}if(d>=Math.floor(c.gutters.getBoundingClientRect().right))return!1;D(b);if(!wc(a,
"gutterClick"))return!0;var g=c.lineDiv.getBoundingClientRect();if(e>g.bottom)return!0;e-=g.top-c.viewOffset;for(g=0;g<a.options.gutters.length;++g){var h=c.gutters.childNodes[g];if(h&&h.getBoundingClientRect().right>=d){c=Xa(a.view.doc,e);ma(a,a,"gutterClick",a,c,a.options.gutters[g],b);break}}return!0}function va(a,b){2>Math.abs(a.view.scrollTop-b)||(a.view.scrollTop=b,W||O(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=
b),W&&O(a,[]))}function wa(a,b,c){if(!(c?b==a.view.scrollLeft:2>Math.abs(a.view.scrollLeft-b))){a.view.scrollLeft=b;c=a.display;if(c.alignWidgets||c.gutters.firstChild){for(var d=c.scroller.getBoundingClientRect().left-c.sizer.getBoundingClientRect().left-c.scroller.scrollLeft+a.view.scrollLeft,e=c.gutters.offsetWidth,f=d+"px",g=c.lineDiv.firstChild;g;g=g.nextSibling)if(g.alignable)for(var h=0,j=g.alignable;h<j.length;++h)j[h].style.left=f;c.gutters.style.left=d+e+"px"}a.display.scroller.scrollLeft!=
b&&(a.display.scroller.scrollLeft=b);a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b)}}function ec(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&(b.detail&&b.axis==b.HORIZONTAL_AXIS)&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);if(d&&ka&&U)for(var e=b.target;e!=f;e=e.parentNode)if(e.lineObj){a.display.currentWheelTarget=e;break}var f=a.display.scroller;if(c&&!W&&!pa&&null!=K)d&&va(a,Math.max(0,Math.min(f.scrollTop+d*K,f.scrollHeight-
f.clientHeight))),wa(a,Math.max(0,Math.min(f.scrollLeft+c*K,f.scrollWidth-f.clientWidth))),D(b),qa=null;else{if(d&&null!=K){var e=d*K,g=a.view.scrollTop,h=g+a.display.wrapper.clientHeight;0>e?g=Math.max(0,g+e-50):h=Math.min(a.view.doc.height,h+e+50);O(a,[],{top:g,bottom:h})}20>fb&&(null==qa?(qa=f.scrollLeft,Ob=f.scrollTop,Ia=c,Ja=d,setTimeout(function(){if(null!=qa){var a=f.scrollLeft-qa,b=f.scrollTop-Ob,a=b&&Ja&&b/Ja||a&&Ia&&a/Ia;qa=Ob=null;a&&(K=(K*fb+a)/(fb+1),++fb)}},200)):(Ia+=c,Ja+=d))}}function gb(a,
b,c){if("string"==typeof b&&(b=Pb[b],!b))return!1;a.display.pollingFast&&Lb(a)&&(a.display.pollingFast=!1);var d=a.view,e=d.sel.shift;try{Fa(a)&&(d.suppressEdits=!0),c&&(d.sel.shift=!1),b(a)}catch(f){if(f!=xc)throw f;return!1}finally{d.sel.shift=e,d.suppressEdits=!1}return!0}function yc(a){var b=a.view.keyMaps.slice(0);b.push(a.options.keyMap);a.options.extraKeys&&b.unshift(a.options.extraKeys);return b}function zc(a,b){function c(){h=!0}var d=Qb(a.options.keyMap),e=d.auto;clearTimeout(Ac);e&&!Bc(b)&&
(Ac=setTimeout(function(){Qb(a.options.keyMap)==d&&(a.options.keyMap=e.call?e.call(null,a):e)},50));var f=fa[F(b,"keyCode")],g=!1,g=ka&&(pa||nd);if(null==f||b.altGraphKey)return!1;F(b,"altKey")&&(f="Alt-"+f);if(F(b,g?"metaKey":"ctrlKey"))f="Ctrl-"+f;if(F(b,g?"ctrlKey":"metaKey"))f="Cmd-"+f;var h=!1,g=yc(a),g=F(b,"shiftKey")?hb("Shift-"+f,g,function(b){return gb(a,b,!0)},c)||hb(f,g,function(b){if("string"==typeof b&&/^go[A-Z]/.test(b))return gb(a,b)},c):hb(f,g,function(b){return gb(a,b)},c);h&&(g=
!1);g&&(D(b),$a(a),ib&&(b.oldKeyCode=b.keyCode,b.keyCode=0));return g}function fc(a){this.view.focused||ca(this);V&&27==a.keyCode&&(a.returnValue=!1);if(!this.options.onKeyEvent||!this.options.onKeyEvent(this,ua(a))){var b=F(a,"keyCode");this.view.sel.shift=16==b||F(a,"shiftKey");var c=zc(this,a);pa&&(Rb=c?b:null,!c&&(88==b&&!cb&&F(a,ka?"metaKey":"ctrlKey"))&&this.replaceSelection(""))}}function dd(a){var b=this;if(!b.options.onKeyEvent||!b.options.onKeyEvent(b,ua(a))){var c=F(a,"keyCode"),d=F(a,
"charCode");if(pa&&c==Rb)Rb=null,D(a);else if(!(pa&&(!a.which||10>a.which)||wb)||!zc(b,a)){c=String.fromCharCode(null==d?c:d);this.options.electricChars&&(this.view.mode.electricChars&&this.options.smartIndent&&!Fa(this)&&-1<this.view.mode.electricChars.indexOf(c))&&setTimeout(t(b,function(){jb(b,b.view.sel.to.line,"smart")}),75);if(c=hb("'"+c+"'",yc(b),function(a){return gb(b,a,!0)}))D(a),$a(b);c||ya(b)}}}function ca(a){"nocursor"!=a.options.readOnly&&(a.view.focused||(ia(a,"focus",a),a.view.focused=
!0,-1==a.display.scroller.className.search(/\bCodeMirror-focused\b/)&&(a.display.scroller.className+=" CodeMirror-focused"),ha(a,!0)),bb(a),$a(a))}function zb(a){a.view.focused&&(ia(a,"blur",a),a.view.focused=!1,a.display.scroller.className=a.display.scroller.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){a.view.focused||(a.view.sel.shift=!1)},150)}function dc(a,b){function c(){d.inputDiv.style.position="relative";d.input.style.cssText=h;ib&&(d.scrollbarV.scrollTop=
d.scroller.scrollTop=g);bb(a);if(null!=d.input.selectionStart){clearTimeout(Sb);var b=d.input.value=" "+(C(e.from,e.to)?"":d.input.value),c=0;d.prevInput=" ";d.input.selectionStart=1;d.input.selectionEnd=b.length;Sb=setTimeout(function k(){" "==d.prevInput&&0==d.input.selectionStart?t(a,Pb.selectAll)(a):10>c++?Sb=setTimeout(k,500):ha(a)},200)}}var d=a.display,e=a.view.sel,f=Ha(a,b),g=d.scroller.scrollTop;if(f&&!pa){(C(e.from,e.to)||B(f,e.from)||!B(f,e.to))&&t(a,S)(a,f,f);var h=d.input.style.cssText;
d.inputDiv.style.position="absolute";d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";H(a);ha(a,!0);C(e.from,e.to)&&(d.input.value=d.prevInput=" ");W?(Ra(b),s(window,"mouseup",function m(){P(window,"mouseup",m);setTimeout(c,20)})):setTimeout(c,50)}}function Mb(a,b,c,d,e,f){var g;if(g=Cc){var h=
null;a.view.doc.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;if(c.readOnly&&(!h||-1==kb(h,c)))(h||(h=[])).push(c)}});if(h){g=[{from:b,to:c}];for(var j=0;j<h.length;++j)for(var m=h[j].find(),l=0;l<g.length;++l){var k=g[l];if(B(m.from,k.to)&&!B(m.to,k.from)){var q=[l,1];B(k.from,m.from)&&q.push({from:k.from,to:m.from});B(m.to,k.to)&&q.push({from:m.to,to:k.to});g.splice.apply(g,q);l+=q.length-1}}}else g=null}if(g){for(b=g.length-
1;1<=b;--b)lb(a,g[b].from,g[b].to,[""],f);if(g.length)return lb(a,g[0].from,g[0].to,d,e,f)}else return lb(a,b,c,d,e,f)}function lb(a,b,c,d,e,f){if(!a.view.suppressEdits){var g=a.view,h=[];g.doc.iter(b.line,c.line+1,function(a){h.push(Ka(a.text,a.markedSpans))});var j=g.sel.from,m=g.sel.to,l;var k=I(h[0]),q=I(L(h)),p=b.ch,n=c.ch;if(!k&&!q)l=d;else{if(k)for(var r=0,x;r<k.length;++r){var u=k[r],s=u.marker;if(null==u.from||(s.inclusiveLeft?u.from<=p:u.from<p)||"bookmark"==s.type&&u.from==p){var t=null==
u.to||(s.inclusiveRight?u.to>=p:u.to>p);(x||(x=[])).push({from:u.from,to:t?null:u.to,marker:s})}}k=x;if(q)for(var r=0,v;r<q.length;++r)if(x=q[r],u=x.marker,null==x.to||(u.inclusiveRight?x.to>=n:x.to>n)||"bookmark"==u.type&&x.from==n&&x.from!=p)s=null==x.from||(u.inclusiveLeft?x.from<=n:x.from<n),(v||(v=[])).push({from:s?null:x.from-n,to:null==x.to?null:x.to-n,marker:u});q=v;v=1==d.length;r=L(d).length+(v?p:0);if(k)for(n=0;n<k.length;++n)x=k[n],null==x.to&&((u=mb(q,x.marker))?v&&(x.to=null==u.to?null:
u.to+r):x.to=p);if(q)for(n=0;n<q.length;++n)x=q[n],null!=x.to&&(x.to+=r),null==x.from?(u=mb(k,x.marker),u||(x.from=r,v&&(k||(k=[])).push(x))):(x.from+=r,v&&(k||(k=[])).push(x));p=[Ka(d[0],k)];if(!v){v=d.length-2;if(0<v&&k)for(n=0;n<k.length;++n)null==k[n].to&&(l||(l=[])).push({from:null,to:null,marker:k[n].marker});for(n=0;n<v;++n)p.push(Ka(d[n+1],l));p.push(Ka(L(d),q))}l=p}c=Dc(a,b,c,l,e,f);if(g.history){b=b.line;d=d.length;e=g.sel.from;g=g.sel.to;l=a.view.history;l.undone.length=0;p=+new Date;if((k=
L(l.done))&&(l.lastOp==a.curOp.id||l.lastOrigin==f&&("input"==f||"delete"==f)&&l.lastTime>p-600)){j=L(k.events);if(j.start>b+h.length||j.start+j.added<b)k.events.push({start:b,added:d,old:h});else{m=Math.max(0,j.start-b);q=Math.max(0,b+h.length-(j.start+j.added));for(n=m;0<n;--n)j.old.unshift(h[n-1]);for(n=q;0<n;--n)j.old.push(h[h.length-n]);m&&(j.start=b);j.added+=d-(h.length-m-q)}k.fromAfter=e;k.toAfter=g}else{k={events:[{start:b,added:d,old:h}],fromBefore:j,toBefore:m,fromAfter:e,toAfter:g};for(l.done.push(k);l.done.length>
a.options.undoDepth;)l.done.shift();0>l.dirtyCounter?l.dirtyCounter=NaN:l.dirtyCounter++}l.lastTime=p;l.lastOp=a.curOp.id;l.lastOrigin=f}return c}}function Ec(a,b){var c=a.view.doc,d=a.view.history,e=("undo"==b?d.done:d.undone).pop();if(e){for(var f={events:[],fromBefore:e.fromAfter,toBefore:e.toAfter,fromAfter:e.fromBefore,toAfter:e.toBefore},g=e.events.length-1;0<=g;g-=1){d.dirtyCounter+="undo"==b?-1:1;var h=e.events[g],j=[],m=h.start+h.added;c.iter(h.start,m,function(a){j.push(Ka(a.text,a.markedSpans))});
f.events.push({start:h.start,added:h.old.length,old:j});var l=g?null:{from:e.fromBefore,to:e.toBefore};Dc(a,{line:h.start,ch:0},{line:m-1,ch:v(c,m-1).text.length},h.old,l,b)}("undo"==b?d.undone:d.done).push(f)}}function Dc(a,b,c,d,e,f){var g=a.view,h=g.doc,j=a.display;if(!g.suppressEdits){var m=c.line-b.line,l=v(h,b.line),k=v(h,c.line),q=!1,p=b.line;a.options.lineWrapping||(p=J(Ya(h,l)),h.iter(p,c.line+1,function(a){if(Ua(h,a)==g.maxLineLength)return q=!0}));var n=L(d),r=ba(j);if(0==b.ch&&0==c.ch&&
""==G(n)){for(var s=[],u=0,t=d.length-1;u<t;++u)s.push(ta(G(d[u]),I(d[u]),r));ra(a,k,k.text,I(n));m&&h.remove(b.line,m,a);s.length&&h.insert(b.line,s)}else if(l==k)if(1==d.length)ra(a,l,l.text.slice(0,b.ch)+G(d[0])+l.text.slice(c.ch),I(d[0]));else{s=[];u=1;for(t=d.length-1;u<t;++u)s.push(ta(G(d[u]),I(d[u]),r));s.push(ta(G(n)+l.text.slice(c.ch),I(n),r));ra(a,l,l.text.slice(0,b.ch)+G(d[0]),I(d[0]));h.insert(b.line+1,s)}else if(1==d.length)ra(a,l,l.text.slice(0,b.ch)+G(d[0])+k.text.slice(c.ch),I(d[0])),
h.remove(b.line+1,m,a);else{s=[];ra(a,l,l.text.slice(0,b.ch)+G(d[0]),I(d[0]));ra(a,k,G(n)+k.text.slice(c.ch),I(n));u=1;for(t=d.length-1;u<t;++u)s.push(ta(G(d[u]),I(d[u]),r));1<m&&h.remove(b.line+1,m-1,a);h.insert(b.line+1,s)}if(a.options.lineWrapping){var y=Math.max(5,j.scroller.clientWidth/sc(j)-3);h.iter(b.line,b.line+d.length,function(a){if(0!=a.height){var b=(Math.ceil(a.text.length/y)||1)*r;b!=a.height&&Y(a,b)}})}else h.iter(p,b.line+d.length,function(a){var b=Ua(h,a);b>g.maxLineLength&&(g.maxLine=
a,g.maxLineLength=b,g.maxLineChanged=!0,q=!1)}),q&&(a.curOp.updateMaxLine=!0);g.frontier=Math.min(g.frontier,b.line);Sa(a,400);var w=d.length-m-1;$(a,b.line,c.line+1,w);if(wc(a,"change")){for(u=0;u<d.length;++u)"string"!=typeof d[u]&&(d[u]=d[u].text);f={from:b,to:c,text:d,origin:f};if(a.curOp.textChanged){for(j=a.curOp.textChanged;j.next;j=j.next);j.next=f}else a.curOp.textChanged=f}var z={line:b.line+d.length-1,ch:G(n).length+(1==d.length?b.ch:0)};e&&"string"!=typeof e?e.from?(d=e.from,e=e.to):d=
e:"end"==e?d=e=z:"start"==e?d=e=b:"around"==e?(d=b,e=z):(e=function(a){if(B(a,b))return a;if(!B(c,a))return z;var d=a.line+w,e=a.ch;a.line==c.line&&(e+=G(n).length-(c.ch-(c.line==b.line?b.ch:0)));return{line:d,ch:e}},d=e(g.sel.from),e=e(g.sel.to));S(a,d,e,null,!0);return z}}function aa(a,b,c,d,e){d||(d=c);if(B(d,c)){var f=d;d=c;c=f}return Mb(a,c,d,Ga(b),null,e)}function C(a,b){return a.line==b.line&&a.ch==b.ch}function B(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function w(a,b){if(0>b.line)return{line:0,
ch:0};if(b.line>=a.size)return{line:a.size-1,ch:v(a,a.size-1).text.length};var c=b.ch,d=v(a,b.line).text.length;return null==c||c>d?{line:b.line,ch:d}:0>c?{line:b.line,ch:0}:b}function A(a,b,c,d){var e=a.view.sel;if(e.shift||e.extend){e=e.anchor;if(c){var f=B(b,e);f!=B(c,e)?(e=b,b=c):f!=B(b,c)&&(b=c)}S(a,e,b,d)}else S(a,b,c||b,d);a.curOp.userSelChange=!0}function S(a,b,c,d,e){a.view.goalColumn=null;var f=a.view.sel;if(e||!C(b,f.anchor))b=nb(a,b,d,"push"!=e);if(e||!C(c,f.head))c=nb(a,c,d,"push"!=e);
if(!C(f.anchor,b)||!C(f.head,c))f.anchor=b,f.head=c,d=B(c,b),f.from=d?c:b,f.to=d?b:c,a.curOp.updateInput=!0,a.curOp.selectionChanged=!0}function Fc(a){S(a,a.view.sel.from,a.view.sel.to,null,"push")}function nb(a,b,c,d){var e=a.view.doc,f=!1,g=b,h=c||1;a.view.cantEdit=!1;a:for(;;){var j=v(e,g.line),m;if(j.markedSpans){for(var l=0;l<j.markedSpans.length;++l){var k=j.markedSpans[l],q=k.marker;if((null==k.from||(q.inclusiveLeft?k.from<=g.ch:k.from<g.ch))&&(null==k.to||(q.inclusiveRight?k.to>=g.ch:k.to>
g.ch)))if(d&&q.clearOnEnter)(m||(m=[])).push(q);else if(q.atomic){l=q.find()[0>h?"from":"to"];if(C(l,g)&&(l.ch+=h,0>l.ch?l=l.line?w(e,{line:l.line-1}):null:l.ch>j.text.length&&(l=l.line<e.size-1?{line:l.line+1,ch:0}:null),!l)){if(f){if(!d)return nb(a,b,c,!0);a.view.cantEdit=!0;return{line:0,ch:0}}f=!0;l=b;h=-h}g=l;continue a}}if(m)for(l=0;l<m.length;++l)m[l].clear()}return g}}function tc(a,b){for(;;){var c=!1,d=Z(a,b),e=Kb(a,d.left,d.top,d.left,d.bottom),f=a.view.scrollTop,g=a.view.scrollLeft;null!=
e.scrollTop&&(va(a,e.scrollTop),1<Math.abs(a.view.scrollTop-f)&&(c=!0));null!=e.scrollLeft&&(wa(a,e.scrollLeft),1<Math.abs(a.view.scrollLeft-g)&&(c=!0));if(!c)return d}}function Kb(a,b,c,d,e){var f=a.display,g=f.lineSpace.offsetTop;c+=g;e+=g;var h=f.scroller.clientHeight-sa,j=f.scroller.scrollTop,m={};a=a.view.doc.height+2*g;var l=c<g+10,g=e+g>a-10;c<j?m.scrollTop=l?0:Math.max(0,c):e>j+h&&(m.scrollTop=(g?a:e)-h);c=f.scroller.clientWidth-sa;e=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;d+=f.gutters.offsetWidth;
f=f.gutters.offsetWidth;h=b<f+10;b<e+f||h?(h&&(b=0),m.scrollLeft=Math.max(0,b-10-f)):d>c+e-3&&(m.scrollLeft=d+10-c);return m}function jb(a,b,c,d){var e=a.view.doc;c||(c="add");if("smart"==c)if(a.view.mode.indent)var f=Da(a,b);else c="prev";var g=a.options.tabSize,h=v(e,b),j=oa(h.text,null,g),m=h.text.match(/^\s*/)[0],l;if("smart"==c&&(l=a.view.mode.indent(f,h.text.slice(m.length),h.text),l==xc)){if(!d)return;c="prev"}"prev"==c?l=b?oa(v(e,b-1).text,null,g):0:"add"==c?l=j+a.options.indentUnit:"subtract"==
c&&(l=j-a.options.indentUnit);l=Math.max(0,l);c="";d=0;if(a.options.indentWithTabs)for(e=Math.floor(l/g);e;--e)d+=g,c+="\t";d<l&&(c+=Gc(l-d));c!=m&&aa(a,c,{line:b,ch:0},{line:b,ch:m.length},"input");h.stateAfter=null}function ob(a,b,c){var d=b,e=b,f=a.view.doc;"number"==typeof b?e=v(f,Math.max(0,Math.min(b,f.size-1))):d=J(b);if(null!=d&&c(e,d))$(a,d,d+1);else return null;return e}function Hc(a,b,c,d){function e(a){var c=(d?Gb:Ic)(m,j,b,!0);if(null==c){if(a=!a)a=h+b,0>a||a==f.size?a=!1:(h=a,a=m=v(f,
a));if(a)j=d?(0>b?Ea:ab)(m):0>b?m.text.length:0;else return!1}else j=c;return!0}var f=a.view.doc,g=a.view.sel.head,h=g.line,j=g.ch,m=v(f,h);if("char"==c)e();else if("column"==c)e(!0);else if("word"==c)for(c=!1;!(0>b)||e();){if(pb(m.text.charAt(j)))c=!0;else if(c){0>b&&(b=1,e());break}if(0<b&&!e())break}return nb(a,{line:h,ch:j},b,!0)}function uc(a,b){var c=b.ch,d=b.ch;if(a){!1===b.after||d==a.length?--c:++d;for(var e=a.charAt(c),e=pb(e)?pb:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&
!pb(a)};0<c&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:{line:b.line,ch:c},to:{line:b.line,ch:d}}}function y(a,b,c,d){n.defaults[a]=b;c&&(ja[a]=d?function(a,b,d){d!=gc&&c(a,b,d)}:c)}function na(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function pc(a,b,c){return a.startState?a.startState(b,c):!0}function Qb(a){return"string"==typeof a?T[a]:a}function hb(a,b,c,d){function e(b){b=
Qb(b);var f=b[a];if(!1===f)return d&&d(),!0;if(null!=f&&c(f))return!0;if(b.nofallthrough)return d&&d(),!0;b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return e(b);for(var f=0,j=b.length;f<j;++f)if(e(b[f]))return!0;return!1}for(var f=0;f<b.length;++f)if(e(b[f]))return!0}function Bc(a){a=fa[F(a,"keyCode")];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function La(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function Tb(a,b){this.lines=[];
this.type=b;this.cm=a}function Jc(a,b,c,d,e){var f=a.view.doc,g=new Tb(a,e);if("range"==e&&!B(b,c))return g;if(d)for(var h in d)d.hasOwnProperty(h)&&(g[h]=d[h]);g.replacedWith&&(g.collapsed=!0,g.replacedWith=r("span",[g.replacedWith],"CodeMirror-widget"));g.collapsed&&(Ba=!0);var j=b.line,m=0,l,k;f.iter(j,c.line+1,function(a){var d={from:null,to:null,marker:g};m+=a.text.length;j==b.line&&(d.from=b.ch,m-=b.ch);j==c.line&&(d.to=c.ch,m-=a.text.length-c.ch);g.collapsed&&(j==c.line&&(k=qb(a,c.ch)),j==
b.line?l=qb(a,b.ch):Y(a,0));a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.lines.push(a);g.collapsed&&(j==b.line&&X(a))&&Y(a,0);++j});g.readOnly&&(Cc=!0,(a.view.history.done.length||a.view.history.undone.length)&&a.clearHistory());if(g.collapsed){if(l!=k)throw Error("Inserting collapsed marker overlapping an existing one");g.size=m;g.atomic=!0}(g.className||g.startStyle||g.endStyle||g.collapsed)&&$(a,b.line,c.line+1);g.atomic&&Fc(a);return g}function mb(a,b){if(a)for(var c=0;c<
a.length;++c){var d=a[c];if(d.marker==b)return d}}function qb(a,b){var c=Ba&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)if(e=c[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!d||d.width<e.marker.width))d=e.marker;return d}function Aa(a){return qb(a,-1)}function Va(a){return qb(a,a.text.length+1)}function Ya(a,b){for(var c;c=Aa(b);)b=v(a,c.find().from.line);return b}function X(a){var b=Ba&&a.markedSpans;if(b)for(var c,d=0;d<b.length;++d)if(c=b[d],c.marker.collapsed&&
(null==c.from||0==c.from&&c.marker.inclusiveLeft&&Kc(a,c)))return!0}function Kc(a,b){if(null==b.to||b.marker.inclusiveRight&&b.to==a.text.length)return!0;for(var c,d=0;d<a.markedSpans.length;++d)if(c=a.markedSpans[d],c.marker.collapsed&&c.from==b.to&&(c.marker.inclusiveLeft||b.marker.inclusiveRight)&&Kc(a,c))return!0}function G(a){return"string"==typeof a?a:a.text}function I(a){if("string"==typeof a)return null;a=a.markedSpans;for(var b=null,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=
a.slice(0,c)):b&&b.push(a[c]);return!b?a:b.length?b:null}function Ka(a,b){return b?{text:a,markedSpans:b}:a}function Lc(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c){var d=b[c].marker.lines,e=kb(d,a);d.splice(e,1)}a.markedSpans=null}}function Mc(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.lines.push(a);a.markedSpans=b}}function ta(a,b,c){a={text:a,height:c};Mc(a,b);X(a)&&(a.height=0);return a}function ra(a,b,c,d){b.text=c;b.stateAfter=b.styles=null;null!=b.order&&(b.order=null);Lc(b);
Mc(b,d);X(b)?b.height=0:b.height||(b.height=ba(a.display));ma(a,b,"change")}function nc(a,b,c){var d=a.view.mode,e=a.options.flattenSpans,f=!b.styles,g=0,h="",j=null;a=new La(b.text,a.options.tabSize);var m=b.styles||(b.styles=[]);for(""==b.text&&d.blankLine&&d.blankLine(c);!a.eol();){var l=d.token(a,c),k=a.current();a.start=a.pos;!e||j!=l?(h&&(f=f||g>=m.length||h!=m[g]||j!=m[g+1],m[g++]=h,m[g++]=j),h=k,j=l):h+=k;if(5E3<a.pos)break}h&&(f=f||g>=m.length||h!=m[g]||j!=m[g+1],m[g++]=h,m[g++]=j);5E3<a.pos&&
(m[g++]=b.text.slice(a.pos),m[g++]=null);g!=m.length&&(m.length=g,f=!0);return f}function oc(a,b,c){var d=a.view.mode;a=new La(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!a.eol()&&5E3>=a.pos;)d.token(a,c),a.start=a.pos}function Nc(a){return!a?null:Oc[a]||(Oc[a]="cm-"+a.replace(/ +/g," cm-"))}function lc(a,b,c){for(var d,e=b,f,g,h=!0;d=Aa(e);)h=!1,e=v(a.view.doc,d.find().from.line),f||(f=e);d={pre:r("pre"),col:0,pos:0,display:!c,measure:null,addedOne:!1,cm:a};e.textClass&&
(d.pre.className=e.textClass);do{e.styles||nc(a,e,e.stateAfter=Da(a,J(e)));d.measure=e==b&&c;d.pos=0;d.addToken=d.measure?od:Pc;c&&(g&&e!=b&&!d.addedOne)&&(c[0]=d.pre.appendChild(Qc(a.display.measure)),d.addedOne=!0);var j;a:{var m=e;g=d;j=m.styles;var l=m.markedSpans;if(l)for(var m=m.text.length,k=0,n=0,p="",s=void 0,t=0,x=void 0,u=void 0,y=void 0,w=void 0;;){if(t==k){for(var x=u=y="",w=null,t=Infinity,z=null,C=0;C<l.length;++C){var A=l[C],B=A.marker;if(A.from<=k&&(null==A.to||A.to>k)){if(null!=
A.to&&t>A.to&&(t=A.to,u=""),B.className&&(x+=" "+B.className),B.startStyle&&A.from==k&&(y+=" "+B.startStyle),B.endStyle&&A.to==t&&(u+=" "+B.endStyle),B.collapsed&&(!w||w.marker.width<B.width))w=A}else A.from>k&&t>A.from&&(t=A.from);"bookmark"==B.type&&(A.from==k&&B.replacedWith)&&(z=B.replacedWith)}if(w&&(w.from||0)==k)if(Rc(g,(null==w.to?m:w.to)-k,null!=w.from&&w.marker.replacedWith),null==w.to){j=w.marker.find();break a}z&&!w&&Rc(g,0,z)}if(k>=m)break;for(z=Math.min(m,t);;){if(p){C=k+p.length;w||
(A=C>z?p.slice(0,z-k):p,g.addToken(g,A,s+x,y,k+A.length==t?u:""));if(C>=z){p=p.slice(z-k);k=z;break}k=C;y=""}p=j[n++];s=Nc(j[n++])}}else for(var n=0;n<j.length;n+=2)g.addToken(g,j[n],Nc(j[n+1]));j=void 0}g=e==f;j&&(e=v(a.view.doc,j.to.line),h=!1)}while(j);c&&!d.addedOne&&(c[0]=d.pre.appendChild(h?r("span","\u00a0"):Qc(a.display.measure)));!d.pre.firstChild&&!X(b)&&d.pre.appendChild(document.createTextNode("\u00a0"));return d.pre}function Pc(a,b,c,d,e){if(b){if(Ub.test(b))for(var f=document.createDocumentFragment(),
g=0;;){Ub.lastIndex=g;var h=Ub.exec(b),j=h?h.index-g:b.length-g;j&&(f.appendChild(document.createTextNode(b.slice(g,g+j))),a.col+=j);if(!h)break;g+=j+1;"\t"==h[0]?(h=a.cm.options.tabSize,h-=a.col%h,f.appendChild(r("span",Gc(h),"cm-tab")),a.col+=h):(j=r("span","\u2022","cm-invalidchar"),j.title="\\u"+h[0].charCodeAt(0).toString(16),f.appendChild(j),a.col+=1)}else{a.col+=b.length;var f=document.createTextNode(b)}if(c||d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),a.pre.appendChild(r("span",[f],
b));a.pre.appendChild(f)}}function od(a,b,c,d,e){for(var f=0;f<b.length;++f)f&&(f<b.length-1&&a.cm.options.lineWrapping&&rb.test(b.slice(f-1,f+1)))&&a.pre.appendChild(r("wbr")),a.measure[a.pos++]=Pc(a,b.charAt(f),c,0==f&&d,f==b.length-1&&e);b.length&&(a.addedOne=!0)}function Rc(a,b,c){c&&(a.display||(c=c.cloneNode(!0)),a.pre.appendChild(c),a.measure&&b&&(a.measure[a.pos]=c,a.addedOne=!0));a.pos+=b}function Pa(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=
a[b].height;this.height=d}function Oa(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function v(a,b){for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function Y(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function J(a){if(null==a.parent)return null;var b=a.parent;a=kb(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=
0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a}function Xa(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function Ca(a,b){b=Ya(a.view.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=
f.children[e];if(g==d)break;else c+=g.height}return c}function R(a){var b=a.order;null==b&&(b=a.order=Sc(a.text));return b}function yb(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function pd(){Ra(this)}function ua(a){a.stop||(a.stop=pd);return a}function D(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Tc(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Ra(a){D(a);Tc(a)}function vc(a){var b=a.which;null==b&&(a.button&1?b=1:
a.button&2?b=3:a.button&4&&(b=2));ka&&(a.ctrlKey&&1==b)&&(b=3);return b}function F(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function s(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function P(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==
c){a.splice(b,1);break}}function ia(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function ma(a,b,c){function d(a){return function(){a.apply(null,f)}}var e=b._handlers&&b._handlers[c];if(e)for(var f=Array.prototype.slice.call(arguments,3),g=a.curOp&&a.curOp.delayedCallbacks,h=0;h<e.length;++h)g?g.push(d(e[h])):e[h].apply(null,f)}function wc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function xb(){this.id=
null}function oa(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var d=0,e=0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function Gc(a){for(;sb.length<=a;)sb.push(L(sb)+" ");return sb[a]}function L(a){return a[a.length-1]}function bc(a){Na?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function kb(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function qc(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}function M(a){var b=
Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function pb(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||qd.test(a))}function Uc(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&a[c]&&++b;return!b}function r(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)kc(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Ta(a){a.innerHTML="";return a}function da(a,b){return Ta(a).appendChild(b)}
function kc(a,b){ib?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function Wa(a){if(null!=tb)return tb;var b=r("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");da(a,b);b.offsetWidth&&(tb=b.offsetHeight-b.clientHeight);return tb||0}function Qc(a){if(null==Vb){var b=r("span","\u200b");da(a,r("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Vb=1>=b.offsetWidth&&2<b.offsetHeight&&!ga)}return Vb?r("span","\u200b"):r("span","\u00a0",null,
"display: inline-block; width: 1px; margin-right: -1px")}function Wb(a){return a.level%2?a.from:a.to}function ab(a){return(a=R(a))?a[0].level%2?a[0].to:a[0].from:0}function Ea(a){var b=R(a);return!b?a.text.length:Wb(L(b))}function Vc(a,b){var c=v(a.view.doc,b),d=Ya(a.view.doc,c);d!=c&&(b=J(d));c=R(d);d=!c?0:c[0].level%2?Ea(d):ab(d);return{line:b,ch:d}}function rd(a,b){for(var c,d;c=Va(d=v(a.view.doc,b));)b=c.find().to.line;c=R(d);d=!c?d.text.length:c[0].level%2?ab(d):Ea(d);return{line:b,ch:d}}function Gb(a,
b,c,d){var e=R(a);if(!e)return Ic(a,b,c,d);d=d?function(b,c){do b+=c;while(0<b&&Hb.test(a.text.charAt(b)));return b}:function(a,b){return a+b};for(var f=e[0].level,g=0;g<e.length;++g){var h=e[g],j=h.level%2==f;if(h.from<b&&h.to>b||j&&(h.from==b||h.to==b))break}for(b=d(b,h.level%2?-c:c);null!=b;)if(h.level%2==f)if(b<h.from||b>h.to)b=(h=e[g+=c])&&(0<c==h.level%2?d(h.to,-1):d(h.from,1));else break;else if(b==(h.level%2?h.to:h.from))b=(h=e[--g])&&Wb(h);else if(b==Wb(h))b=(h=e[++g])&&(h.level%2?h.to:h.from);
else break;return 0>b||b>a.text.length?null:b}function Ic(a,b,c,d){b+=c;if(d)for(;0<b&&Hb.test(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var W=/gecko\/\d/i.test(navigator.userAgent),V=/MSIE \d/.test(navigator.userAgent),ga=/MSIE [1-7]\b/.test(navigator.userAgent),ib=/MSIE [1-8]\b/.test(navigator.userAgent),U=/WebKit\//.test(navigator.userAgent),nd=U&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Wc=/Chrome\//.test(navigator.userAgent),pa=/Opera\//.test(navigator.userAgent),Ab=/Apple Computer/.test(navigator.vendor),
wb=/KHTML\//.test(navigator.userAgent),fd=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),gd=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),kd=/PhantomJS/.test(navigator.userAgent),Na=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),$b=Na||/Android|webOS|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent),ka=Na||/Mac/.test(navigator.platform),Cc=!1,Ba=!1,ea,eb,db,fb=0,Ia,Ja,qa,Ob,K=null;V?K=-0.53:W?K=15:Wc?K=-0.7:Ab&&(K=-1/3);var Ac,Rb=null,
Sb;n.prototype={getValue:function(a){var b=[],c=this.view.doc;c.iter(0,c.size,function(a){b.push(a.text)});return b.join(a||"\n")},setValue:t(null,function(a){var b=this.view.doc,c={line:0,ch:0},d=v(b,b.size-1).text.length;lb(this,c,{line:b.size-1,ch:d},Ga(a),c,c,"setValue")}),getSelection:function(a){return this.getRange(this.view.sel.from,this.view.sel.to,a)},replaceSelection:t(null,function(a,b,c){var d=this.view.sel;Mb(this,d.from,d.to,Ga(a),b||"around",c)}),focus:function(){window.focus();H(this);
ca(this);ya(this)},setOption:function(a,b){var c=this.options,d=c[a];c[a]==b&&"mode"!=a||(c[a]=b,ja.hasOwnProperty(a)&&t(this,ja[a])(this,b,d))},getOption:function(a){return this.options[a]},getMode:function(){return this.view.mode},addKeyMap:function(a){this.view.keyMaps.push(a)},removeKeyMap:function(a){for(var b=this.view.keyMaps,c=0;c<b.length;++c)if(("string"==typeof a?b[c].name:b[c])==a)return b.splice(c,1),!0},undo:t(null,function(){Ec(this,"undo")}),redo:t(null,function(){Ec(this,"redo")}),
indentLine:t(null,function(a,b,c){"string"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");0<=a&&a<this.view.doc.size&&jb(this,a,b,c)}),indentSelection:t(null,function(a){var b=this.view.sel;if(C(b.from,b.to))return jb(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),b=b.from.line;b<=c;++b)jb(this,b,a)}),historySize:function(){var a=this.view.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.view.history=yb()},markClean:function(){this.view.history.dirtyCounter=
0;this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return 0==this.view.history.dirtyCounter},getHistory:function(){function a(a){for(var b=0,e=[],f;b<a.length;++b){var g=a[b];e.push({events:f=[],fromBefore:g.fromBefore,toBefore:g.toBefore,fromAfter:g.fromAfter,toAfter:g.toAfter});for(var h=0,g=g.events;h<g.length;++h){var j=[],m=g[h];f.push({start:m.start,added:m.added,old:j});for(var l=0;l<m.old.length;++l)j.push(G(m.old[l]))}}return e}var b=this.view.history;return{done:a(b.done),
undone:a(b.undone)}},setHistory:function(a){var b=this.view.history=yb();b.done=a.done;b.undone=a.undone},getTokenAt:function(a){var b=this.view.doc;a=w(b,a);for(var c=Da(this,a.line),d=this.view.mode,b=v(b,a.line),b=new La(b.text,this.options.tabSize);b.pos<a.ch&&!b.eol();){b.start=b.pos;var e=d.token(b,c)}return{start:b.start,end:b.pos,string:b.current(),className:e||null,type:e||null,state:c}},getStateAfter:function(a){var b=this.view.doc;a=Math.max(0,Math.min(null==a?b.size-1:a,b.size-1));return Da(this,
a+1)},cursorCoords:function(a,b){var c;c=this.view.sel;c=null==a?c.head:"object"==typeof a?w(this.view.doc,a):a?c.from:c.to;return Z(this,c,b||"page")},charCoords:function(a,b){return Za(this,w(this.view.doc,a),b||"page")},coordsChar:function(a){var b=this.display.lineSpace.getBoundingClientRect();return Fb(this,a.left-b.left,a.top-b.top)},defaultTextHeight:function(){return ba(this.display)},markText:t(null,function(a,b,c){return Jc(this,w(this.view.doc,a),w(this.view.doc,b),c,"range")}),setBookmark:t(null,
function(a,b){a=w(this.view.doc,a);return Jc(this,a,a,b?{replacedWith:b}:{},"bookmark")}),findMarksAt:function(a){var b=this.view.doc;a=w(b,a);var c=[];if(b=v(b,a.line).markedSpans)for(var d=0;d<b.length;++d){var e=b[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&c.push(e.marker)}return c},setGutterMarker:t(null,function(a,b,c){return ob(this,a,function(a){var e=a.gutterMarkers||(a.gutterMarkers={});e[b]=c;!c&&Uc(e)&&(a.gutterMarkers=null);return!0})}),clearGutter:t(null,function(a){var b=
0,c=this,d=c.view.doc;d.iter(0,d.size,function(d){d.gutterMarkers&&d.gutterMarkers[a]&&(d.gutterMarkers[a]=null,$(c,b,b+1),Uc(d.gutterMarkers)&&(d.gutterMarkers=null));++b})}),addLineClass:t(null,function(a,b,c){return ob(this,a,function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[e]){if(RegExp("\\b"+c+"\\b").test(a[e]))return!1;a[e]+=" "+c}else a[e]=c;return!0})}),removeLineClass:t(null,function(a,b,c){return ob(this,a,function(a){var e="text"==b?"textClass":"background"==
b?"bgClass":"wrapClass",f=a[e];if(f)if(null==c)a[e]=null;else{var g=f.replace(RegExp("^"+c+"\\b\\s*|\\s*\\b"+c+"\\b"),"");if(g==f)return!1;a[e]=g||null}else return!1;return!0})}),addLineWidget:t(null,function(a,b,c){var d=c||{};d.node=b;d.noHScroll&&(this.display.alignWidgets=!0);ob(this,a,function(a){(a.widgets||(a.widgets=[])).push(d);d.line=a;return!0});return d}),removeLineWidget:t(null,function(a){var b=a.line.widgets,c=J(a.line);if(null!=c){for(var d=0;d<b.length;++d)b[d]==a&&b.splice(d--,1);
$(this,c,c+1)}}),lineInfo:function(a){if("number"==typeof a){if(!(0<=a&&a<this.view.doc.size))return null;var b=a;a=v(this.view.doc,a);if(!a)return null}else if(b=J(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Z(this,w(this.view.doc,a));
var g=a.top,h=a.left;b.style.position="absolute";f.sizer.appendChild(b);if("over"==d)g=a.top;else if("near"==d){d=Math.max(f.wrapper.clientHeight,this.view.doc.height);var j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);a.bottom+b.offsetHeight>d&&a.top>b.offsetHeight&&(g=a.top-b.offsetHeight);h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+f.lineSpace.offsetTop+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==
e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=Kb(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&va(this,a.scrollTop),null!=a.scrollLeft&&wa(this,a.scrollLeft))},lineCount:function(){return this.view.doc.size},clipPos:function(a){return w(this.view.doc,a)},getCursor:function(a){var b=this.view.sel;a=null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||!1===a?b.to:b.from;return{line:a.line,ch:a.ch}},somethingSelected:function(){return!C(this.view.sel.from,
this.view.sel.to)},setCursor:t(null,function(a,b,c){a=w(this.view.doc,"number"==typeof a?{line:a,ch:b||0}:a);c?A(this,a):S(this,a,a)}),setSelection:t(null,function(a,b){var c=this.view.doc;S(this,w(c,a),w(c,b||a))}),extendSelection:t(null,function(a,b){var c=this.view.doc;A(this,w(c,a),b&&w(c,b))}),setExtending:function(a){this.view.sel.extend=a},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){var b=this.view.doc;if(0<=a&&a<b.size)return v(b,a)},getLineNumber:function(a){return J(a)},
setLine:t(null,function(a,b){0<=a&&a<this.view.doc.size&&aa(this,b,{line:a,ch:0},{line:a,ch:v(this.view.doc,a).text.length})}),removeLine:t(null,function(a){0<=a&&a<this.view.doc.size&&aa(this,"",{line:a,ch:0},w(this.view.doc,{line:a+1,ch:0}))}),replaceRange:t(null,function(a,b,c){var d=this.view.doc;b=w(d,b);c=c?w(d,c):b;return aa(this,a,b,c)}),getRange:function(a,b,c){var d=this.view.doc;a=w(d,a);b=w(d,b);var e=a.line,f=b.line;if(e==f)return v(d,e).text.slice(a.ch,b.ch);var g=[v(d,e).text.slice(a.ch)];
d.iter(e+1,f,function(a){g.push(a.text)});g.push(v(d,f).text.slice(0,b.ch));return g.join(c||"\n")},triggerOnKeyDown:t(null,fc),execCommand:function(a){return Pb[a](this)},moveH:t(null,function(a,b){var c=this.view.sel,d=0>a?c.from:c.to;if(c.shift||c.extend||C(c.from,c.to))d=Hc(this,a,b,!0);A(this,d,d,a)}),deleteH:t(null,function(a,b){var c=this.view.sel;C(c.from,c.to)?aa(this,"",c.from,Hc(this,a,b,!1),"delete"):aa(this,"",c.from,c.to,"delete");this.curOp.userSelChange=!0}),moveV:t(null,function(a,
b){var c=this.view,d=c.doc,e=this.display,f=Z(this,c.sel.head,"div"),g=f.left,h;null!=c.goalColumn&&(g=c.goalColumn);"page"==b?(h=Math.min(e.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),h=f.top+a*h):"line"==b&&(h=0<a?f.bottom+3:f.top-3);do{var j=Fb(this,g,h);h+=5*a}while(j.outside&&(0>a?0<h:h<d.height));"page"==b&&(e.scrollbarV.scrollTop+=Za(this,j,"div").top-f.top);A(this,j,j,a);c.goalColumn=g}),toggleOverwrite:function(){this.display.cursor.className=(this.view.overwrite=
!this.view.overwrite)?this.display.cursor.className+" CodeMirror-overwrite":this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(a){var b=0,c,d=this.view.doc;d.iter(0,d.size,function(d){d=d.text.length+1;if(d>a)return c=a,!0;a-=d;++b});return w(d,{line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;this.view.doc.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){null!=a&&(this.display.scrollbarH.scrollLeft=
this.display.scroller.scrollLeft=a);null!=b&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=b);O(this,[])},getScrollInfo:function(){var a=this.display.scroller,b=sa;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:function(a){"number"==typeof a&&(a={line:a,ch:0});a=a?w(this.view.doc,a):this.view.sel.head;tc(this,a)},setSize:function(a,b){function c(a){return"number"==
typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.refresh()},on:function(a,b){s(this,a,b)},off:function(a,b){P(this,a,b)},operation:function(a){return t(this,a)()},refresh:function(){xa(this);this.display.scroller.scrollHeight>this.view.scrollTop&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=this.view.scrollTop);O(this,!0)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},
getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var ja=n.optionHandlers={},ub=n.defaults={},gc=n.Init={toString:function(){return"CodeMirror.Init"}};y("value","",function(a,b){a.setValue(b)},!0);y("mode",null,Qa,!0);y("indentUnit",2,Qa,!0);y("indentWithTabs",!1);y("smartIndent",!0);y("tabSize",4,function(a){Qa(a);xa(a);O(a,!0)},!0);y("electricChars",!0);y("theme","default",function(a){ac(a);za(a)},!0);y("keyMap","default",function(a){var b=
T[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")});y("extraKeys",null);y("onKeyEvent",null);y("onDragEvent",null);y("lineWrapping",!1,function(a){var b=a.view.doc,c=ba(a.display);if(a.options.lineWrapping){a.display.wrapper.className+=" CodeMirror-wrap";var d=a.display.scroller.clientWidth/sc(a.display)-3;b.iter(0,b.size,function(a){if(0!=a.height){var b=Math.ceil(a.text.length/d)||1;1!=b&&Y(a,b*c)}});a.display.sizer.style.minWidth=
""}else a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),hc(a.view),b.iter(0,b.size,function(a){0!=a.height&&Y(a,c)});$(a,0,b.size);xa(a);setTimeout(function(){ic(a.display,a.view.doc.height)},100)},!0);y("gutters",[],function(a){vb(a.options);za(a)},!0);y("lineNumbers",!1,function(a){vb(a.options);za(a)},!0);y("firstLineNumber",1,za,!0);y("lineNumberFormatter",function(a){return a},za,!0);y("showCursorWhenSelecting",!1,Cb,!0);y("readOnly",!1,function(a,b){"nocursor"==
b?(zb(a),a.display.input.blur()):b||ha(a,!0)});y("dragDrop",!0);y("cursorBlinkRate",530);y("cursorHeight",1);y("workTime",100);y("workDelay",100);y("flattenSpans",!0);y("pollInterval",100);y("undoDepth",40);y("viewportMargin",10,function(a){a.refresh()},!0);y("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});y("autofocus",null);var Xc=n.modes={},Xb=n.mimeModes={};n.defineMode=function(a,b){!n.defaults.mode&&"null"!=a&&(n.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=
2;c<arguments.length;++c)b.dependencies.push(arguments[c])}Xc[a]=b};n.defineMIME=function(a,b){Xb[a]=b};n.resolveMode=function(a){if("string"==typeof a&&Xb.hasOwnProperty(a))a=Xb[a];else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return n.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};n.getMode=function(a,b){b=n.resolveMode(b);var c=Xc[b.name];if(!c)return n.getMode(a,"text/plain");c=c(a,b);if(Ma.hasOwnProperty(b.name)){var d=Ma[b.name],e;for(e in d)d.hasOwnProperty(e)&&
(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;return c};n.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});n.defineMIME("text/plain","null");var Ma=n.modeExtensions={};n.extendMode=function(a,b){var c=Ma.hasOwnProperty(a)?Ma[a]:Ma[a]={},d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};n.defineExtension=function(a,b){n.prototype[a]=b};n.defineOption=y;var Bb=[];n.defineInitHook=function(a){Bb.push(a)};n.copyState=na;n.startState=pc;n.innerMode=function(a,b){for(;a.innerMode;){var c=
a.innerMode(b);b=c.state;a=c.mode}return c||{mode:a,state:b}};var Pb=n.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!C(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0},"delete"):a.replaceRange("",b,d?c:{line:b.line},"delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b},"delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},
goDocStart:function(a){a.extendSelection({line:0,ch:0})},goDocEnd:function(a){a.extendSelection({line:a.lineCount()-1})},goLineStart:function(a){a.extendSelection(Vc(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=Vc(a,b.line),d=a.getLineHandle(c.line),e=R(d);!e||0==e[0].level?(d=Math.max(0,d.text.search(/\S/)),a.extendSelection({line:c.line,ch:b.line==c.line&&b.ch<=d&&b.ch?0:d})):a.extendSelection(c)},goLineEnd:function(a){a.extendSelection(rd(a,a.getCursor().line))},goLineUp:function(a){a.moveV(-1,
"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,
"word")},delWordAfter:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end","input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+
c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){t(a,function(){a.replaceSelection("\n","end","input");a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},T=n.keyMap={};T.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",
Enter:"newlineAndIndent",Insert:"toggleOverwrite"};T.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace",
"Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};T.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext",
"Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};T["default"]=ka?T.macDefault:T.pcDefault;T.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore",
"Ctrl-K":"killLine","Ctrl-T":"transposeChars"};n.isModifierKey=Bc;n.fromTextArea=function(a,b){function c(){a.value=j.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(null==b.autofocus){var d=document.body;try{d=document.activeElement}catch(e){}b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form){s(a.form,"submit",c);var f=a.form,g=f.submit;try{f.submit=function l(){c();f.submit=g;f.submit();f.submit=l}}catch(h){}}a.style.display=
"none";var j=n(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);j.save=c;j.getTextArea=function(){return a};j.toTextArea=function(){c();a.parentNode.removeChild(j.getWrapperElement());a.style.display="";a.form&&(P(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=g))};return j};La.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},
eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return oa(this.string,
this.start,this.tabSize)},indentation:function(){return oa(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)}};n.StringStream=La;Tb.prototype.clear=function(){if(!this.explicitlyCleared){Ib(this.cm);
for(var a=null,b=null,c=0;c<this.lines.length;++c){var d=this.lines[c],e=mb(d.markedSpans,this);null!=e.to&&(b=J(d));for(var f=d,g=d.markedSpans,h=e,j=void 0,m=0;m<g.length;++m)g[m]!=h&&(j||(j=[])).push(g[m]);f.markedSpans=j;null!=e.from?a=J(d):this.collapsed&&!X(d)&&Y(d,ba(this.cm.display))}null!=a&&$(this.cm,a,b+1);this.lines.length=0;this.explicitlyCleared=!0;this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,Fc(this.cm));Jb(this.cm);ma(this.cm,this,"clear")}};Tb.prototype.find=function(){for(var a,
b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=mb(d.markedSpans,this);if(null!=e.from||null!=e.to)d=J(d),null!=e.from&&(a={line:d,ch:e.from}),null!=e.to&&(b={line:d,ch:e.to})}return"bookmark"==this.type?a:a&&{from:a,to:b}};window.lineIsHidden=X;var Oc={},Ub=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;Pa.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];this.height-=f.height;var g=f;g.parent=null;Lc(g);ma(c,f,"delete")}this.lines.splice(a,
b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Oa.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-
a),h=e.height;e.remove(a,g,c);this.height-=h-e.height;f==g&&(this.children.splice(d--,1),e.parent=null);if(0==(b-=g))break;a=0}else a-=f}25>this.size-b&&(a=[],this.collapse(a),this.children=[new Pa(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=
this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertHeight(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new Pa(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Oa(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=kb(a.parent.children,
a);a.parent.children.splice(c+1,0,b)}else c=new Oa(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,g-a);if(f.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};n.e_stop=Ra;n.e_preventDefault=D;n.e_stopPropagation=Tc;n.on=s;n.off=P;n.signal=ia;var sa=30,xc=n.Pass=
{toString:function(){return"CodeMirror.Pass"}};xb.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};n.countColumn=oa;var sb=[""],qd=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,Hb=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,Nb;if(ib)Nb=!1;else{var Yc=r("div");Nb="draggable"in Yc||"dragDrop"in
Yc}var rb=/^$/;W?rb=/$'/:Ab?rb=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:Wc&&(rb=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var tb,Vb,Ga=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};n.splitLines=Ga;var ld=window.getSelection?
function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)},cb;var Yb=r("div");"oncopy"in Yb?cb=!0:(Yb.setAttribute("oncopy","return;"),cb="function"==typeof Yb.oncopy);var fa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",
37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};n.keyNames=fa;for(var z=0;10>z;z++)fa[z+48]=String(z);for(z=65;90>=z;z++)fa[z]=String.fromCharCode(z);for(z=1;12>=z;z++)fa[z+111]=fa[z+
63235]="F"+z;var Sc,ud=function(a){return 255>=a?sd.charAt(a):1424<=a&&1524>=a?"R":1536<=a&&1791>=a?td.charAt(a-1536):1792<=a&&2220>=a?"r":"L"},sd="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",td="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",
vd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Zc=/[stwN]/,$c=/[LRr]/,ad=/[Lb1n]/,bd=/[1n]/;Sc=function(a){if(!vd.test(a))return!1;for(var b=a.length,c=[],d=null,e=0,f;e<b;++e)if(c.push(f=ud(a.charCodeAt(e))),null==d)if("L"==f)d="L";else if("R"==f||"r"==f)d="R";null==d&&(d="L");for(var e=0,g=d;e<b;++e)f=c[e],"m"==f?c[e]=g:g=f;e=0;for(g=d;e<b;++e)f=c[e],"1"==f&&"r"==g?c[e]="n":$c.test(f)&&(g=f,"r"==f&&(c[e]="R"));e=1;for(g=c[0];e<b-1;++e){f=c[e];if("+"==f&&"1"==g&&"1"==c[e+1])c[e]="1";else if(","==
f&&g==c[e+1]&&("1"==g||"n"==g))c[e]=g;g=f}for(e=0;e<b;++e)if(f=c[e],","==f)c[e]="N";else if("%"==f){for(g=e+1;g<b&&"%"==c[g];++g);var h=e&&"!"==c[e-1]||g<b-1&&"1"==c[g]?"1":"N";for(f=e;f<g;++f)c[f]=h;e=g-1}e=0;for(g=d;e<b;++e)f=c[e],"L"==g&&"1"==f?c[e]="L":$c.test(f)&&(g=f);for(e=0;e<b;++e)if(Zc.test(c[e])){for(g=e+1;g<b&&Zc.test(c[g]);++g);f="L"==(g<b-1?c[g]:d);h="L"==(e?c[e-1]:d)||f?"L":"R";for(f=e;f<g;++f)c[f]=h;e=g-1}for(var d=[],j,e=0;e<b;)if(ad.test(c[e])){f=e;for(++e;e<b&&ad.test(c[e]);++e);
d.push({from:f,to:e,level:0})}else{h=e;g=d.length;for(++e;e<b&&"L"!=c[e];++e);for(f=h;f<e;)if(bd.test(c[f])){h<f&&d.splice(g,0,{from:h,to:f,level:1});h=f;for(++f;f<e&&bd.test(c[f]);++f);d.splice(g,0,{from:h,to:f,level:2});h=f}else++f;h<e&&d.splice(g,0,{from:h,to:e,level:1})}if(1==d[0].level&&(j=a.match(/^\s+/)))d[0].from=j[0].length,d.unshift({from:0,to:j[0].length,level:0});if(1==L(d).level&&(j=a.match(/\s+$/)))L(d).to-=j[0].length,d.push({from:b-j[0].length,to:b,level:0});d[0].level!=L(d).level&&
d.push({from:b,to:b,level:d[0].level});return d};n.version="3.0";return n}();